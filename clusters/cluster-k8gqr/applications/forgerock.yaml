---
apiVersion: v1
kind: Namespace
metadata:
  name: forgerock

---
apiVersion: v1
kind: Secret
metadata:
  name: github-deploy-forgerock
  namespace: flux-system
stringData:
  identity: ENC[AES256_GCM,data:KMD48LQtXMPQHgdJ/A8b1qbcbIY5hV3csP3FJm1I5em2XFP7/dabuxwEZ4RNb967qK9ZVDrilycXqXFAg99EC/h7Fu+EjfW9/PbxKZn+BYJwPTeYSpJaH3R7PzW8bOT9LsZey79eBAExtHuig8BwtFq1VJcUtOeUOwjgSM97smqU/cCvs+dwrf3jLwtRYzfXHDbsoXU69JgVvMgKsCbwX0neRqAvJr4h+1OzOGV2Fq4xH3c5U3B+2hkbfHQqBMAYzQ9ddRzEpXzHA/iiL93JpPMPOPhq3gXmjT2PyU/WUByVdikzId4AEfoar0QtF1iiCSxu2VyRMqrGDRBZX+LRjsu7QDjPatl8rZ+YZnXBtRVDQF4CYhDF4rsIhdtJiLDVG5Cvu6NH8Ju6sxofyy7gQ523S8MR3n7ZQDZqmRoNjPyXyYcZ7zj85TlRKGDgwwnrfwUq80q+/zG0n0IH/Q/OHv3lJby5crp6HQk5EAxx7Hppws8SKSF0oy6ltTGUvvWGqlLGecy5lrbhB5ct0an9hiIT/uGKMz1fAOxkJ8c3koZ63Zw=,iv:VMFKl1uEn1/b/CbEpFrM5z2GX9BnuAZGcmlj/l08V94=,tag:NzyhqbOlw6W5WUegyHjjKA==,type:str]
  identity.pub: ENC[AES256_GCM,data:ddcNpZQfl46fEFRG7/aBNk0zK9+QHihCSheLRQzyxVf/KmeYDEuVgv3EN9iuJwkGHkVm4tB79s9YzNizmgNLgslNQ5I9jlUgxkO2+mUVR4MJ,iv:6HTjuWVY+BbiLPFETqKMzYvkwBbVb1BeOgbYa7+jbl0=,tag:Rej0lII6qS0ksJDklg4c2Q==,type:str]
  known_hosts: ENC[AES256_GCM,data:/wxwSjpDG2jati9P9NOI3Ac511fDkncTcBTxSGvaXSbyFOQ1/XAUQ0L7vWTU97zl7x/Q/3G8GsTjZVIVSJrr9rxbyasgUcL21FYqB2uwm7bR6nMgbK5WFG/Qqg9+6yHO8LVbraCgz/UzU6JY7YjNhFsFAEUOyKp8hNANE0nzXdL0wAmcPatE47gVPn3W6ATIabs6+umSja/4GgCulzp9VhkYnaHUcOOrYeSr,iv:ItirDurdHtTZYcl1klSVbD6S8TDS/D/YadB3pr7Wllk=,tag:kTyaPwfo3jmr4VQeNXNQ5Q==,type:str]
sops:
  age:
    - recipient: age1spe3avhtcgkgqujprtujackxw6au5h8tum6nk6czmxgaclprx5tsz9jrhr
      enc: |
        -----BEGIN AGE ENCRYPTED FILE-----
        YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBWSEpsdEtJQVlncnhySUZm
        SG01TTdvUzZEMXlrUjlNa2pnbUt4S2tIK2pVCkhZSU50dnpNeXQvb3pMaTR4M3o3
        RzIyKzNSWWdtVGxQbDNLMXFRUWRQbVkKLS0tIFQxaERJbm5aVVN1UUFGUDN1ajk3
        T2FLbnl1bTIzVkdid2dQZEo0WVFjajgKsMZcyGc56vpvV/2iS4iS0QVERPDphd8S
        XWPuxUcvmJlHMDL8ivT6UiTfIZuvUE0iL2jzjXGPm86Lq7ed7LlTgg==
        -----END AGE ENCRYPTED FILE-----
  lastmodified: "2025-10-12T10:38:42Z"
  mac: ENC[AES256_GCM,data:5JY+E2tQxXJjBFrihpYbnElk6Er2ETvHbcIMecY02vnajyB5UBkTqSwMuSoypjhxSG8Ir04jCbIVevozYWQbY6yuN94kO+AYrsq+/zg1xY+e7FBtfhO1okVd5DfOkAvsH6C4N2k4KtICEuzFfG3/bBcU2p8Mi+xgXmdfncAOcMQ=,iv:kPd2yWz9Oo8NA6b6lOntXvoTdf44gunXmbYB75pjAew=,tag:RilkeNUajDrIbh0COiIIvw==,type:str]
  encrypted_regex: ^(data|stringData)$
  version: 3.11.0

---
apiVersion: source.toolkit.fluxcd.io/v1
kind: GitRepository
metadata:
  name: forgerock
  namespace: flux-system
spec:
  interval: 1m0s
  ref:
    branch: marc
  url: ssh://git@github.com:enschede/forgeops.git
  secretRef:
    name: github-deploy-forgerock

---
apiVersion: kustomize.toolkit.fluxcd.io/v1
kind: Kustomization
metadata:
  name: forgerock
  namespace: flux-system
spec:
  interval: 1m
  path: ./kustomize/overlay/default
  prune: true
  sourceRef:
    kind: GitRepository
    name: forgerock
    namespace: flux-system
  wait: true
  decryption:
    provider: sops
    secretRef:
      name: sops-age
  dependsOn:
    - name: ingress-nginx
    - name: cert-manager
    - name: secret-agent

